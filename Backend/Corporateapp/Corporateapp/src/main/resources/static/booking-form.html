<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Passenger Details</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- keep your existing stylesheet -->
  <link rel="stylesheet" href="/css/traveller_style.css">

  <!-- Embedded visual enhancements (safe fallback; will not change IDs or backend) -->
  <style>
    :root{
      --bg:#f4f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0b5fff;
      --success:#28a745;
      --border:rgba(15,23,42,0.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background:var(--bg);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      padding:20px;
    }

    /* Page layout */
    .page {
      max-width:980px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
      align-items:start;
    }

    /* Keep original H1 but style */
    h1{
      font-size:20px;
      margin:0 0 14px 0;
      font-weight:800;
      color:#0f172a;
    }

    /* Form card */
    .form-card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:12px;
      padding:18px;
      box-shadow:0 10px 30px rgba(11,95,255,0.03);
    }

    form#bookingForm{display:flex;flex-direction:column;gap:12px}

    /* inputs: keep IDs same, enhance visuals */
    #bookingForm input[type="text"],
    #bookingForm input[type="email"],
    #bookingForm input[type="tel"]{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #e6eef9;
      background:#fff;
      font-size:14px;
      outline:none;
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    #bookingForm input:focus{
      border-color:var(--accent);
      box-shadow:0 8px 20px rgba(11,95,255,0.06);
    }

    /* labels */
    label{
      display:flex;
      flex-direction:column;
      font-weight:600;
      color:#243444;
      gap:6px;
      font-size:13px;
    }

    /* Submit CTA */
    #bookingForm button[type="submit"]{
      margin-top:6px;
      padding:11px 14px;
      border-radius:10px;
      border:none;
      background:linear-gradient(180deg,#2bb04a,#28a745);
      color:#fff;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 10px 26px rgba(40,167,69,0.12);
      transition:transform .12s ease, box-shadow .12s ease;
    }
    #bookingForm button[type="submit"]:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 36px rgba(40,167,69,0.16);
    }

    /* Confirmation area */
    #confirmation{margin-top:10px;font-weight:700;color:var(--accent)}

    /* Right column: booking summary */
    .summary-card{
      background:linear-gradient(180deg,#fff,#fbfdff);
      border:1px solid var(--border);
      border-radius:12px;
      padding:16px;
      box-shadow:0 10px 30px rgba(11,95,255,0.03);
    }
    .summary-item{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .summary-left{display:flex;flex-direction:column;gap:6px}
    .airline{font-weight:800;color:#0f172a}
    .flight-time{color:var(--muted);font-weight:600}
    .flight-details{color:var(--muted);font-size:13px}
    .total-price{font-weight:900;color:#0f172a;font-size:18px}

    .price-breakdown{margin-top:12px;padding-top:8px;border-top:1px dashed rgba(11,95,255,0.06);display:flex;flex-direction:column;gap:8px}
    .price-breakdown p{display:flex;justify-content:space-between;color:#243444;font-weight:600;margin:0}

    /* Responsive: collapse to single column on narrow screens */
    @media (max-width:980px){
      .page{grid-template-columns:1fr; padding:12px}
      .summary-card{position:relative; top:0}
    }
  </style>
</head>
<body>
  <!-- Preserve original IDs and hidden fields so backend integration is unchanged -->
  <div class="page">
    <!-- Left: form (keeps your bookingForm id and flightId hidden input intact) -->
    <div class="form-card">
      <h1>Passenger Details</h1>

      <form id="bookingForm">
        <input type="hidden" id="flightId">

        <label for="name">Name
          <input type="text" id="name" required />
        </label>

        <label for="email">Email
          <input type="email" id="email" required />
        </label>

        <label for="phone">Phone
          <input type="tel" id="phone" required />
        </label>

        <button type="submit">Confirm Booking</button>
      </form>

      <div id="confirmation" aria-live="polite"></div>
    </div>

    <!-- Right: booking summary (visual only; does not change backend) -->
    <aside class="summary-card" aria-label="Booking summary">
      <div class="summary-item" role="group" aria-label="flight">
        <div class="summary-left">
          <div class="airline">British Airways</div>
          <div class="flight-time">10:00 - 15:30</div>
          <div class="flight-details">London (LHR) to New York (JFK)</div>
        </div>
        <div class="summary-price">
          <div class="total-price">$450</div>
        </div>
      </div>

      <div class="price-breakdown" aria-hidden="false">
        <p><span>Base Fare</span><span>$400</span></p>
        <p><span>Taxes & Fees</span><span>$50</span></p>
        <p class="grand-total"><strong>Total Price</strong><strong>$450</strong></p>
      </div>
    </aside>
  </div>

  <script>
    /* keep your original script intact and unmodified logic */
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const flightId = params.get("flightId");
      document.getElementById("flightId").value = flightId;

      document.getElementById("bookingForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const booking = {
          flightId: flightId,
          passengerName: document.getElementById("name").value,
          email: document.getElementById("email").value,
          phone: document.getElementById("phone").value
        };

        fetch("/api/book", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(booking)
        })
        .then(res => res.json())
        .then(data => {
          console.log("Booking response:", data);
          document.getElementById("confirmation").innerHTML = `<p>Booking confirmed! ID: ${data.booking_id}</p>`;
        })
        .catch(err => {
          console.error("Booking failed:", err);
          document.getElementById("confirmation").innerHTML = `<p>Booking failed. Try again.</p>`;
        });
      });
    });
  </script>
</body>
</html>
